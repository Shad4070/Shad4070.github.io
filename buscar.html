<!DOCTYPE html>
<html>
<head>
	<title>Buscar</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="estilo.css">
	<script type="text/javascript">

		function Volver(){
			location.href="index.html";
		}
//Luis Felipe Lopez Morales
		function traerProductos(){
					var xml = new XMLHttpRequest();
					xml.open("GET","/productos",false);
					xml.send( );
					var datos = xml.responseText;
					console.log(datos);
				return JSON.parse(datos);
			}
//Luis Felipe Lopez Morales
		function mostrar(producto){

			alert("Nombre: " + producto.nombre + ", Codigo: " + producto.codigo +
			", Precio: " + producto.precio + "\nCategoria: " + producto.categoria +
			", Cantidad: " + producto.cantidad);
//Luis Felipe Lopez Morales
		}
		function buscarNombre(){
			var nombre = document.getElementById('nomBus').value;
			var productos = traerProductos();
			var bool = false;
			console.log(productos);
			var producto = {}
			for(var i = 0; i<productos.length;i++){
				if(productos[i].nombre == nombre){
					producto.nombre = productos[i].nombre;
					producto.codigo = productos[i].codigo;
					producto.precio = productos[i].precio;
					producto.categoria = productos[i].categoria;
					producto.cantidad = productos[i].canti;
					bool = true;
				}
			}
			if(bool){
				mostrar(producto);
			}else{
			alert("No existe un producto con este nombre: " + nombre);
		}
		}
//Luis Felipe Lopez Morales
		function buscarId(){
			var productos = traerProductos();
			var codigo = document.getElementById('codBus').value;
			console.log(productos);
			var bool = false;
			var producto = {}
			for(var i = 0; i<productos.length;i++){
				if(productos[i].codigo == codigo){
					producto.nombre = productos[i].nombre;
					producto.codigo = productos[i].codigo;
					producto.precio = productos[i].precio;
					producto.categoria = productos[i].categoria;
					producto.cantidad = productos[i].canti;
					bool = true;
				}
			}
			if(bool){
				mostrar(producto);

			}else{
						alert("No existe un producto con este codigo: " + codigo);
			}
	}

	</script>
</head>
<body>
	<div id="laterales">.</div>
	<div id="divBuscar">

		<div class="Titulos"> Buscar producto </div>
		<textarea id="nomBus" placeholder="Nombre del producto"></textarea>
		<button class="buscar" onclick="buscarNombre()">Buscar</button>

		<div class="Titulos"> Buscar por codigo </div>
		<textarea id="codBus" placeholder="Codigo del producto"></textarea>
		<button class="buscar" onclick="buscarId()">Buscar</button>

		<div class="Titulos"> Buscar por categoria </div>

		<select>
			<option value="cat1">Categoria 1</option>
			<option value="cat2">Categoria 2</option>
			<option value="cat3">Categoria 3</option>
			<option value="cat4">Categoria 4</option>
		</select>
		<button class="buscar" onclick="Volver()">Buscar</button>


	</div>
	<div id="lateralD">.</div>
</body>
</html>
